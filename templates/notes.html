{% extends "base.html" %}

{% block title %}My Notes{% endblock %}

{% block content %}
<h2>Your Notes</h2>

<p>
  <a href="{{ url_for('notes.dashboard') }}">Back to dashboard</a>
</p>

<form method="POST" action="{{ url_for('notes.notes') }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <p>
    <input type="text" name="title" placeholder="Note title" required>
  </p>
  <p>
    <textarea name="content" placeholder="Note content" rows="6" required></textarea>
  </p>
  <p>
    <button type="submit">Create Note</button>
  </p>
</form>

<hr>

{% if notes|length == 0 %}
  <p>No notes yet.</p>
{% else %}
  <ul>
    {% for note in notes %}
      <li>
        <strong>{{ note.title }}</strong>
        <small>({{ note.created_at }})</small>

        <a href="{{ url_for('notes.view_note', note_id=note.id) }}">Open</a>
        |
        <a href="{{ url_for('notes.edit_note', note_id=note.id) }}">Edit</a>

        <form method="POST"
              action="{{ url_for('notes.delete_note', note_id=note.id) }}"
              style="display:inline;">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
          <button type="submit">Delete</button>
        </form>
      </li>
    {% endfor %}
  </ul>
{% endif %}

{% endblock %}
